(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-65b6"],{"4hzS":function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"a",function(){return n}),a.d(t,"b",function(){return l});var s=a("t3Un");function i(e){return Object(s.a)({url:"/face/detect",method:"post",data:e})}function n(e){return Object(s.a)({url:"/face/beautify",method:"post",data:e})}function l(e){return Object(s.a)({url:"/face/compare",method:"post",data:e})}},"8mwE":function(e,t,a){"use strict";a.r(t);var s=a("4hzS"),i={directives:{waves:a("ZySA").a},data:function(){return{fileList:[],limit:1,imgUrl:"",apiInfo:{api_key:"-VwERFhbivDsqAR7DJQuhV7Fn0iOisF_",api_secret:"2xpIjYKTxgOtp8gDA9NSKdi1ggWSVeqT"},listLoading:!1,faceAttributes:{},showResult:!1,result:{gender:"",age:"",maleBeauty:"",femaleBeauty:"",emotions:""}}},methods:{submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){this.imgUrl="",this.showResult=!1},handlePreview:function(e){this.imgUrl=e.url},beforeRemove:function(e,t){var a=this;return this.$confirm("确定移除 "+e.name+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},handlePost:function(e){var t=this,a=e.file,i=new FormData;i.append("file",a),Object(s.c)(i).then(function(e){0!==e.data.faces.length?(t.showResult=!0,t.faceAttributes=e.data.faces[0].attributes,t.result.gender=t.faceAttributes.gender.value,t.result.age=t.faceAttributes.age.value,t.result.maleBeauty=t.faceAttributes.beauty.male_score,t.result.femaleBeauty=t.faceAttributes.beauty.female_score,t.result.emotions=t.faceAttributes.emotion):(t.fileList=[],t.imgUrl="",t.$notify.info({title:"提示",message:"未检测到人脸，请重新上传",duration:3600}))})}}},n=(a("Bbww"),a("KHd+")),l=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-container"},[e._m(0),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"before-remove":e.beforeRemove,"file-list":e.fileList,"auto-upload":!1,limit:e.limit,data:e.apiInfo,"http-request":e.handlePost,"list-type":"picture",action:""}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传并检测")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片文件，且不超过2mb，文件个数限制为1个")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"64px"}},[a("el-collapse-transition",[e.imgUrl?a("img",{attrs:{src:e.imgUrl,width:"200px",height:"200px"}}):e._e()])],1),e._v(" "),a("el-collapse-transition",[e.showResult?a("div",{staticClass:"result-wrapper"},[a("el-collapse",[a("el-collapse-item",{attrs:{title:"性别判断",name:"1"}},[a("div",{ref:"gender"},[e._v("性别："+e._s(e.result.gender))])]),e._v(" "),a("el-collapse-item",{attrs:{title:"年龄预测",name:"2"}},[a("div",{ref:"age"},[e._v("年龄估计："+e._s(e.result.age))])]),e._v(" "),a("el-collapse-item",{attrs:{title:"颜值评分",name:"3"}},[a("div",{ref:"beauty"},[e._v("\n            作为男生颜值："+e._s(e.result.maleBeauty)+"\n          ")]),e._v(" "),a("div",{ref:"beauty"},[e._v("\n            作为女生颜值："+e._s(e.result.femaleBeauty)+"\n          ")])]),e._v(" "),a("el-collapse-item",{attrs:{title:"表情判断",name:"4"}},e._l(e.result.emotions,function(t,s){return a("div",{key:s},[a("span",[e._v(e._s(s)+" : "+e._s(t)+"%")])])}))],1)],1):e._e()])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("code",[t("strong",[this._v("上传图片对人脸进行检测")])])}],!1,null,"402c7e35",null);l.options.__file="index.vue";t.default=l.exports},Bbww:function(e,t,a){"use strict";var s=a("LJE0");a.n(s).a},LJE0:function(e,t,a){},ZySA:function(e,t,a){"use strict";var s=a("P2sY"),i=a.n(s),n=(a("jUE0"),{bind:function(e,t){e.addEventListener("click",function(a){var s=i()({},t.value),n=i()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),l=n.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var r=l.getBoundingClientRect(),o=l.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":((o=document.createElement("span")).className="waves-ripple",o.style.height=o.style.width=Math.max(r.width,r.height)+"px",l.appendChild(o)),n.type){case"center":o.style.top=r.height/2-o.offsetHeight/2+"px",o.style.left=r.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-r.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-r.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=n.color,o.className="waves-ripple z-active",!1}},!1)}}),l=function(e){e.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(l)),n.install=l;t.a=n},jUE0:function(e,t,a){}}]);